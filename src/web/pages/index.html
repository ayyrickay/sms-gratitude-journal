<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>SMS Gratitude Journal</title>
    <link href="https://fonts.googleapis.com/css?family=Saira" rel="stylesheet">
    <link rel="stylesheet" href="./assets/main.css" type="text/css">
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PX8G7Q5');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PX8G7Q5"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="container">
      <section class="about">
        <h1 class="stack-text">SMS Gratitude Journal</h1>
        <p>
          Life is stressful - but, for many of us, there's still a lot to appreciate. Take a second each day to record the people, places, and events for which you're grateful. This service will send you one text a day asking you to reflect on these moments of gratefulness. Just sign up to get started.
        </p>
      </section>
      <section class="content">
        <p class="status" id="status">
          Success
        </p>
        <form onSubmit="registerUser(); return false" method="post" class="main-form">
          <label for="name">
            Name
            <input type="text" id="name" name="name" placeholder="ex: Jane Smith" autofocus required />
          </label>
          <label for="email">
            Email
            <input type="email" id="email" name="email" placeholder="ex: jane.smith@gratitude.co" required />
          </label>
          <label for="phone">
            Phone
            <input type="tel" id="phone" name="phone" placeholder="ex: 558675309" required />
          </label>
          <button type="submit">Get Started</button>
        </form>
      </section>
    </div>
    <script type="text/javascript">
      const registerUser = () => {
        return fetch('/register', {
    	    method: 'post',
          headers: new Headers({"Content-Type": "application/json"}),
  	      body: JSON.stringify({
  		       name: document.getElementById('name').value,
  		       email: document.getElementById('email').value,
             phone: document.getElementById('phone').value
  	      })
        })
        .then((response) => response.json())
        .then((data) => {
          console.log(data)
          if (data.error) {
            document.getElementById('status').style.visibility = "visible"
            document.getElementById('status').innerHTML = data.error
            document.getElementById('status').style.color = "#c0392b"
          } else {
            document.getElementById('status').style.visibility = "visible"
            document.getElementById('status').style.color = "#27ae60"
          }
        })
      }
    </script>
  </body>
</html>
